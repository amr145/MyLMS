@model MyLMS2.Models.AnswerOption

@{
    ViewData["Title"] = "Add Answer Option";
    Layout = "_quizelayout";
}

<h2>Add Answer Option</h2>

@if (User.IsInRole("Instructor"))
{
    <form asp-action="AddAnswerOption" method="post">
        <input type="hidden" asp-for="QuestionId" value="@ViewBag.QuestionId" />

        <div class="form-group">
            <label asp-for="Text"></label>
            <input asp-for="Text" class="form-control" />
            <span asp-validation-for="Text" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label>
                <input asp-for="IsCorrect" type="checkbox" /> Is Correct
            </label>
        </div>

        <button type="submit" class="btn btn-primary">Add</button>
        <a asp-action="Index" class="btn btn-secondary">Finish</a>
    </form>

    <hr />

    <h3>Current Options</h3>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Option</th>
                <th>Is Correct</th>
            </tr>
        </thead>
        <tbody>
            @if (ViewBag.Options != null)
            {
                foreach (var opt in ViewBag.Options)
                {
                    <tr>
                        <td>@opt.Text</td>
                        <td>@(opt.IsCorrect ? "✔️" : "❌")</td>
                    </tr>
                }
            }
        </tbody>
    </table>
}
else
{
    <div class="alert alert-danger">
        You do not have permission to add answer options.
    </div>
}

@section Scripts {
    @await Html.PartialAsync("_ValidationScriptsPartial")
}

